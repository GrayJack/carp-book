<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js rust">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>The Carp Programming Language</title>
        
        <meta name="robots" content="noindex" />
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "coal" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div id="sidebar-scrollbox" class="sidebar-scrollbox">
                <ol class="chapter"><li class="expanded affix "><a href="title_page.html">The Carp Programming Language</a></li><li class="expanded affix "><a href="ch00-00-introduction.html">Introdution</a></li><li class="expanded "><a href="ch01-00-getting-started.html"><strong aria-hidden="true">1.</strong> Getting Started</a></li><li><ol class="section"><li class="expanded "><a href="ch01-01-installation.html"><strong aria-hidden="true">1.1.</strong> Installation</a></li><li class="expanded "><a href="ch01-02-hello-world.html"><strong aria-hidden="true">1.2.</strong> Hello World</a></li><li class="expanded "><a href="ch01-03-repl-compiler.html"><strong aria-hidden="true">1.3.</strong> REPL and Compiler</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust (default)</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title">The Carp Programming Language</h1>

                        <div class="right-buttons">
                            <a href="print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                            
                            <a href="https://github.com/GrayJack/carp-book" title="Git repository" aria-label="Git repository">
                                <i id="git-repository-button" class="fa fa-github"></i>
                            </a>
                            
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#the-carp-programming-language" id="the-carp-programming-language">The Carp Programming Language</a></h1>
<p>by <em>Eric Shimizu Karbstein</em></p>
<p>This book is a working in progress, I will try to keep up-to-date with the
language.</p>
<p>This version of the text assumes you're using the <a href="https://github.com/carp-lang/Carp">master branch</a> of the language (In the future it will change to version 0.4).</p>
<h1><a class="header" href="#introdution" id="introdution">Introdution</a></h1>
<p>Welcome to <em>The Carp Programming Language</em>, an introductory book about Carp.
Carp is a small programming language designed to work well for interactive and
performance sensitive use cases like games, sound synthesis and visualizations.
It uses a ownership system to achieve automatic and deterministic memory
management similar of the <a href="https://www.rust-lang.org/">Rust programming language</a>.</p>
<p>Although it looks like a lisp, it is not. The runtime semantics are much closer
to those of ML or Rust.</p>
<h2><a class="header" href="#who-carp-is-for" id="who-carp-is-for">Who Carp Is For</a></h2>
<p>TODO</p>
<h2><a class="header" href="#who-this-book-is-for" id="who-this-book-is-for">Who This Book Is For</a></h2>
<p>This book assumes that you’ve written code in another programming language but
doesn’t make any assumptions about which one. We’ve tried to make the material
broadly accessible to those from a wide variety of programming backgrounds. We
don’t spend a lot of time talking about what programming is or how to think
about it. If you’re entirely new to programming, you would be better served by
reading a book that specifically provides an introduction to programming.</p>
<h2><a class="header" href="#how-to-use-this-book" id="how-to-use-this-book">How to Use This Book</a></h2>
<p>In general, this book assumes that you’re reading it in sequence from front to
back. Later chapters build on concepts in earlier chapters, and earlier chapters
might not delve into details on a topic; we typically revisit the topic in a
later chapter.</p>
<p>In most situations, we'll lead you to the correct version of any code that
doesn't compile.</p>
<h1><a class="header" href="#getting-started" id="getting-started">Getting Started</a></h1>
<p>In this chapter we'll discuss 3 topics:</p>
<ul>
<li>Installing and setting the tooling of the language</li>
<li>Writing a program that prints <code>Hello, World!</code></li>
<li>How to use the compiler and the REPL</li>
</ul>
<h1><a class="header" href="#installation" id="installation">Installation</a></h1>
<blockquote>
<p>Note: This book assumes basic familiarity with the command line.</p>
</blockquote>
<p><strong>Important Note:</strong> Make sure that you have a C/C++ compiler installed, since
Carp compiles to C and then it calls a C/C++ compiler to output a native binary.</p>
<h2><a class="header" href="#binaries" id="binaries">Binaries</a></h2>
<p><em>TODO: When 0.4 is released</em></p>
<h2><a class="header" href="#arch-user-repository" id="arch-user-repository">Arch User Repository</a></h2>
<p>If you use ArchLinux, you probably know what to do, but anyway for the early,
still learning, users of the Linux distribution.</p>
<p>You will need the following:</p>
<ul>
<li>A internet connection</li>
<li>Yay installed</li>
</ul>
<p><em>Assuming you have <code>yay</code> installed</em></p>
<pre><code class="language-sh">$ yay -S carp-git
</code></pre>
<p>Then set in your shell configuration file an environment variable that tells the
Carp compiler where to find the core library:</p>
<pre><code class="language-sh">export CARP_DIR=/usr/lib/carp/
</code></pre>
<h2><a class="header" href="#from-source" id="from-source">From Source</a></h2>
<p>Since the language is in a early stages we'll teach how to install from the
<a href="https://github.com/carp-lang/Carp">Carp Github source tree</a>. For that you'll
need:</p>
<ul>
<li>A internet connection</li>
<li>Git installed</li>
<li>Stack installed</li>
</ul>
<p>Let's start!!</p>
<p><strong>Cloning the repository:</strong></p>
<pre><code class="language-sh">git clone https://github.com/carp-lang/Carp
</code></pre>
<h3><a class="header" href="#unix-and-unix-like" id="unix-and-unix-like">UNIX and UNIX-like</a></h3>
<p><strong>Building:</strong></p>
<p>It may take a while. This will install the binaries inside <code>$HOME/.local/bin</code>
folder.</p>
<pre><code class="language-sh"># Go to the Carp folder
$ cd Carp

# Build AND install command
$ stack install
</code></pre>
<p><strong>Setting the core library:</strong></p>
<pre><code class="language-sh"># Putting in the appropriated place
$ mkdir ~/.local/lib/carp
$ cp -r core ~/.local/lib/carp
</code></pre>
<p>If your ~/.local/bin is not in the PATH, add it in your shell configuration file</p>
<pre><code class="language-sh">export PATH=$PATH:~/.local/bin
</code></pre>
<p>Then you have to add a environment variable in your shell configuration file to
tell where the core library is.</p>
<pre><code class="language-sh">export CARP_DIR=~/.local/lib/carp/
</code></pre>
<h3><a class="header" href="#windows" id="windows">Windows</a></h3>
<p><em>TODO</em></p>
<h1><a class="header" href="#hello-world" id="hello-world">Hello, World!</a></h1>
<p>Now that you have Carp installed, lets start with the tradition of writing a
hello world program. It's a simple program that output in the terminal <code>Hello, World!</code> and that is it.</p>
<h2><a class="header" href="#creating-a-project-directory" id="creating-a-project-directory">Creating a Project Directory</a></h2>
<p>Start by making a directory to store your Carp code. It doesn't matter where,
but for this book exercises we do recommend to crate a directory in your home
directory just to put all book projects.</p>
<p>For UNIX/UNIX-like:</p>
<pre><code class="language-sh">$ mkdir ~/book_projects
$ cd  ~/book_projects
$ mkdir hello_world
$ cd hello_world
</code></pre>
<p>For Windows:</p>
<pre><code class="language-cmd">&gt; mkdir &quot;%USERPROFILE%\book_projects&quot;
&gt; cd /d &quot;%USERPROFILE%\book_projects&quot;
&gt; mkdir hello_world
&gt; cd hello_world
</code></pre>
<h2><a class="header" href="#writing-and-running-a-carp-program" id="writing-and-running-a-carp-program">Writing and Running a Carp Program</a></h2>
<p>The next step is to create a new file called <em>Main.carp</em>.</p>
<blockquote>
<p>Note that Carp files end with <code>.carp</code>. If you are using more than one word in
your filename, write the first letter of each word as upper case, for example,
use <em>HelloWorld.carp</em> instead of <em>Helloworld.carp</em>.</p>
</blockquote>
<p>Now open the <em>Main.carp</em> file you just created and enter the code in Listing 1-1</p>
<pre><code class="language-clj">(defn main []
    (println* &quot;Hello, World!&quot;))
</code></pre>
<p><span class="caption">Listing 1-1: A program that prints <code>Hello, world!</code></span></p>
<p>Save the file and go to the terminal window and enter the following command:</p>
<pre><code class="language-sh">carp -x Main.carp
</code></pre>
<p>The <code>-x</code> flag tells the compiler to compile and run the program.</p>
<h2><a class="header" href="#anatomy-of-a-carp-program" id="anatomy-of-a-carp-program">Anatomy of a Carp Program</a></h2>
<p>Let's understand what is going on this program.</p>
<pre><code class="language-clj">(defn main []
                              )
</code></pre>
<p>Here we have tree things to look at. The first is the <em>defn</em>, it is a keyword
that let us define a new function, it is followed by a function name, in this
case it is <em>main</em>, then followed by the parameter list (the <em>[]</em> part), the list is empty because this function does not receive a parameter, if the parameter list was not empty it would have something inside the square brackets.</p>
<p>The <em>main</em> function is special, because it is the first part of the code that
runs in every executable Carp program.</p>
<p>Inside of the <em>main</em> function we have:</p>
<pre><code class="language-clj">
    (println* &quot;Hello, World!&quot;)
</code></pre>
<p>This line prints text to the screen. There is some details in here:</p>
<p>The <em>println*</em> here is a Carp macro. Although it is something different than a
function, the call syntax is the same, you cannot tell the difference until you
look into the function/macro implementation. And everything between e double quotes (<code>&quot;</code>) is a string literal.</p>
<h1><a class="header" href="#repl-and-compiler" id="repl-and-compiler">REPL and Compiler</a></h1>
<h2><a class="header" href="#the-repl" id="the-repl">The REPL</a></h2>
<p>Let's start with the REPL, it stands for <em>Read Eval Print Loop</em>, it is a common
feature in many languages and almost cultural in Lisp based languages, the way
it works is quite simple, it reads the expression or statement given by the user,
then evaluate it, print it's result and do it all over again. A REPL is great
tool for testing and prototyping a idea direct from the terminal.</p>
<p>In Carp, you can start the REPL invoking the carp binary without parameters.</p>
<p>On UNIX/UNIX-Like:</p>
<pre><code class="language-sh">$ carp
</code></pre>
<p>On Windows:</p>
<pre><code class="language-cmd">&gt; carp
</code></pre>
<p>Inside the REPL, there is some special features that can be used and probably
will be helpful when writing or debugging code.</p>
<p><strong>Help:</strong> With no parameter, it displays the general help message, while giving
a chapter name.</p>
<pre><code class="language-clj">;; No parameter
(help)

;; With parameter
(help &quot;language&quot;)
</code></pre>
<p><strong>Type:</strong> It receive a symbol and it gives the type of that symbol</p>
<pre><code class="language-clj">(def a 10)
(type a)
</code></pre>
<p>It should return:</p>
<pre><code>a : Int
</code></pre>
<p>Because <em>a</em> is defined as <em>10</em> a <strong>Int</strong>eger number.</p>
<p><strong>Info:</strong> It receives a symbol and it gives the information about that symbol</p>
<pre><code class="language-clj">(def a 10)
(info a)
</code></pre>
<p>In this example, it should return something like:</p>
<pre><code>a : Int
Defined at line 1, column 1 in 'REPL'
</code></pre>
<h2><a class="header" href="#compiler" id="compiler">Compiler</a></h2>
<blockquote>
<p>Note: Unless your project is a library, you project must have a main function.</p>
</blockquote>
<p>Carp compiles to C and then call a C compiler to generate the binary. By default
the generated files and binaries will be on a directory called <em>out</em>, but it can
be changed in the project configuration.</p>
<h3><a class="header" href="#configuring-the-project" id="configuring-the-project">Configuring the project</a></h3>
<p>This part is quite simple, following the same pattern in the toplevel of the
project:</p>
<pre><code class="language-clj">(Project.config &lt;setting&gt; &lt;value&gt;)
</code></pre>
<p>To configure more than one setting, just keep adding the same pattern one more
time in the next line.</p>
<p>Here is the setting options and what it takes as values:</p>
<ul>
<li><code>&quot;cflag&quot;</code>: Takes a <em>String</em>: Add a flag to the C compiler.</li>
<li><code>&quot;libflag&quot;</code>: Takes a <em>String</em>: Add a library flag to the compiler.</li>
<li><code>&quot;compiler&quot;</code>: Takes a <em>String</em>: Set what compiler should be run with the <code>build</code> command.</li>
<li><code>&quot;title&quot;</code>: Takes a <em>String</em>: Set the title of the current project (the final binary name will be this string)</li>
<li><code>&quot;prompt&quot;</code>: Takes a <em>String</em>: Set the prompt in the REPL</li>
<li><code>&quot;search-path&quot;</code>: Takes a <em>String</em>: Add a path where the Carp compiler will look for '*.carp' files</li>
<li><code>&quot;output-directory&quot;</code>: Takes a <em>String</em>: Where to put build artifacts</li>
<li><code>&quot;docs-directory&quot;</code>: Takes a <em>String</em>: Where to put generated docs</li>
<li><code>&quot;generate-only&quot;</code>: Takes a <em>Bool</em>: Set to true if you don't want to run the C compiler when building</li>
<li><code>&quot;echo-c&quot;</code>: Takes a <em>Bool</em>: When a form is defined using 'def' or 'defn' its C code will be printed</li>
<li><code>&quot;echo-compiler-cmd&quot;</code>: Takes a <em>Bool</em>: When building the project the command for running the C compiler will be printed</li>
<li><code>&quot;print-ast&quot;</code>: Takes a <em>Bool</em>: The 'info' command will print the AST for a binding</li>
</ul>
<h3><a class="header" href="#compiler-flags" id="compiler-flags">Compiler flags</a></h3>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        
        
        
        <script type="text/javascript">
            window.playpen_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
